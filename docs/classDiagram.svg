<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="13444" height="3715pt" viewBox="0 0 10082.6 3714.8"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 3710.8)"><title>UmlClassDiagram</title><polygon fill="#fff" stroke="transparent" points="-4 4 -4 -3710.8 10078.6 -3710.8 10078.6 4 -4 4"/><g id="node1" class="node"><title>9</title><polygon fill="#f2f2f2" stroke="#000" points="1704.133 -1558.9 1704.133 -2120.5 2382.231 -2120.5 2382.231 -1558.9 1704.133 -1558.9"/><text x="2043.182" y="-2103.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">TxPermissionHbbft</text><polyline fill="none" stroke="#000" points="1704.133 -2095.7 2382.231 -2095.7"/><text x="1712.133" y="-2079.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="1712.133" y="-2062.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_allowedSenders: address[]</text><text x="1712.133" y="-2045.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">NONE: uint32</text><text x="1712.133" y="-2028.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">ALL: uint32</text><text x="1712.133" y="-2011.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">BASIC: uint32</text><text x="1712.133" y="-1995.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">CALL: uint32</text><text x="1712.133" y="-1978.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">CREATE: uint32</text><text x="1712.133" y="-1961.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">PRIVATE: uint32</text><text x="1712.133" y="-1944.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">REPORT_MALICIOUS_SIGNATURE: bytes4</text><text x="1712.133" y="-1927.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">REVEAL_SECRET_SIGNATURE: bytes4</text><text x="1712.133" y="-1911.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">REVEAL_NUMBER_SIGNATURE: bytes4</text><text x="1712.133" y="-1894.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="1712.133" y="-1877.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">certifierContract: ICertifier</text><text x="1712.133" y="-1860.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isSenderAllowed: mapping(address=&gt;bool)</text><text x="1712.133" y="-1843.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorSetContract: IValidatorSetHbbft</text><text x="1712.133" y="-1827.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">BLOCK_GAS_LIMIT: uint256</text><text x="1712.133" y="-1810.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">BLOCK_GAS_LIMIT_REDUCED: uint256</text><polyline fill="none" stroke="#000" points="1704.133 -1802.1 2382.231 -1802.1"/><text x="1712.133" y="-1785.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="1712.133" y="-1768.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_addAllowedSender(_sender: address)</text><text x="1712.133" y="-1751.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="1712.133" y="-1735.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(_allowed: address[], _certifier: address, _validatorSet: address)</text><text x="1712.133" y="-1718.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="1712.133" y="-1701.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyInitialized()</text><text x="1712.133" y="-1684.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">addAllowedSender(_sender: address)</text><text x="1712.133" y="-1667.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removeAllowedSender(_sender: address)</text><text x="1712.133" y="-1651.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">contractName(): string</text><text x="1712.133" y="-1634.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">contractNameHash(): bytes32</text><text x="1712.133" y="-1617.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">contractVersion(): uint256</text><text x="1712.133" y="-1600.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">allowedSenders(): address[]</text><text x="1712.133" y="-1583.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">allowedTxTypes(_sender: address, _to: address, _gasPrice: uint256, _data: bytes): (typesMask: uint32, cache: bool)</text><text x="1712.133" y="-1567.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isInitialized(): bool</text></g><g id="node22" class="node"><title>19</title><polygon fill="#f2f2f2" stroke="#000" points="2043.713 -2963.9 2043.713 -3088.7 2262.652 -3088.7 2262.652 -2963.9 2043.713 -2963.9"/><text x="2153.182" y="-3072.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="2153.182" y="-3055.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">ICertifier</text><polyline fill="none" stroke="#000" points="2043.713 -3047.1 2262.652 -3047.1"/><polyline fill="none" stroke="#000" points="2043.713 -3022.3 2262.652 -3022.3"/><text x="2051.713" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="2051.713" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">certifiedExplicitly(address): bool</text><text x="2051.713" y="-2972.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(address[], address)</text></g><g id="edge5" class="edge"><title>9-&gt;19</title><path fill="none" stroke="#000" d="M2069.216,-2120.5318C2094.5633,-2393.9593 2131.3959,-2791.2834 2146.4207,-2953.3596"/><polygon fill="#000" stroke="#000" points="2142.97 -2954.057 2147.378 -2963.691 2149.94 -2953.411 2142.97 -2954.057"/></g><g id="node30" class="node"><title>27</title><polygon fill="#f2f2f2" stroke="#000" points="2529.649 -2972.3 2529.649 -3080.3 2770.716 -3080.3 2770.716 -2972.3 2529.649 -2972.3"/><text x="2650.182" y="-3063.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="2650.182" y="-3046.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">ITxPermission</text><polyline fill="none" stroke="#000" points="2529.649 -3038.7 2770.716 -3038.7"/><polyline fill="none" stroke="#000" points="2529.649 -3013.9 2770.716 -3013.9"/><text x="2537.649" y="-2997.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="2537.649" y="-2980.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(address[], address, address)</text></g><g id="edge4" class="edge"><title>9-&gt;27</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M2082.0737,-2120.6374C2124.5149,-2323.0233 2212.1074,-2588.1167 2391.1824,-2751 2435.5326,-2791.3402 2474.3124,-2749.6172 2521.1824,-2787 2571.1901,-2826.8854 2604.4041,-2891.6091 2624.59,-2943.6929"/><polygon fill="none" stroke="#000" points="2614.825 -2947.566 2634.871 -2972.233 2634.582 -2940.449 2614.825 -2947.566"/></g><g id="node31" class="node"><title>28</title><polygon fill="#f2f2f2" stroke="#000" points="5681.52 -2795.9 5681.52 -3256.7 6078.845 -3256.7 6078.845 -2795.9 5681.52 -2795.9"/><text x="5880.182" y="-3240.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="5880.182" y="-3223.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IValidatorSetHbbft</text><polyline fill="none" stroke="#000" points="5681.52 -3215.1 6078.845 -3215.1"/><polyline fill="none" stroke="#000" points="5681.52 -3190.3 6078.845 -3190.3"/><text x="5689.52" y="-3173.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="5689.52" y="-3156.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isValidator(address): bool</text><text x="5689.52" y="-3140.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(address, address, address, address, address[], address[])</text><text x="5689.52" y="-3123.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">newValidatorSet()</text><text x="5689.52" y="-3106.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removeMaliciousValidators(address[])</text><text x="5689.52" y="-3089.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setStakingAddress(address, address)</text><text x="5689.52" y="-3072.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">areDelegatorsBanned(address): bool</text><text x="5689.52" y="-3056.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">blockRewardContract(): address</text><text x="5689.52" y="-3039.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPendingValidators(): address[]</text><text x="5689.52" y="-3022.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPreviousValidators(): address[]</text><text x="5689.52" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getValidators(): address[]</text><text x="5689.52" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isReportValidatorValid(address): bool</text><text x="5689.52" y="-2972.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">finalizeChange()</text><text x="5689.52" y="-2955.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isValidatorBanned(address): bool</text><text x="5689.52" y="-2938.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isValidatorOrPending(address): bool</text><text x="5689.52" y="-2921.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isPendingValidator(address): bool</text><text x="5689.52" y="-2904.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">MAX_VALIDATORS(): uint256</text><text x="5689.52" y="-2888.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">miningByStakingAddress(address): address</text><text x="5689.52" y="-2871.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">randomContract(): address</text><text x="5689.52" y="-2854.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reportMaliciousCallable(address, address, uint256): (bool, bool)</text><text x="5689.52" y="-2837.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingByMiningAddress(address): address</text><text x="5689.52" y="-2820.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingContract(): address</text><text x="5689.52" y="-2804.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getCurrentTimestamp(): uint256</text></g><g id="edge6" class="edge"><title>9-&gt;28</title><path fill="none" stroke="#000" d="M2068.8461,-2120.5366C2104.4155,-2331.691 2189.1991,-2608.2 2391.1824,-2751 2457.0703,-2797.5821 3762.6935,-2781.2866 3843.1824,-2787 4513.6959,-2834.5953 5303.0037,-2942.1233 5671.2875,-2995.3114"/><polygon fill="#000" stroke="#000" points="5670.855 -2998.785 5681.253 -2996.752 5671.857 -2991.857 5670.855 -2998.785"/></g><g id="node40" class="node"><title>37</title><polygon fill="#f2f2f2" stroke="#000" points="1840.389 -2980.7 1840.389 -3071.9 2025.976 -3071.9 2025.976 -2980.7 1840.389 -2980.7"/><text x="1933.182" y="-3055.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">UpgradeableOwned</text><polyline fill="none" stroke="#000" points="1840.389 -3047.1 2025.976 -3047.1"/><polyline fill="none" stroke="#000" points="1840.389 -3022.3 2025.976 -3022.3"/><text x="1848.389" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="1848.389" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyOwner()</text></g><g id="edge3" class="edge"><title>9-&gt;37</title><path fill="none" stroke="#000" d="M2017.1488,-2120.5318C1991.9522,-2392.3337 1955.4064,-2786.5634 1940.2144,-2950.444"/><polygon fill="none" stroke="#000" points="1929.744 -2949.641 1937.43 -2980.483 1950.654 -2951.58 1929.744 -2949.641"/></g><g id="node2" class="node"><title>0</title><polygon fill="#f2f2f2" stroke="#000" points="779.366 -50.9 779.366 -125.3 904.999 -125.3 904.999 -50.9 779.366 -50.9"/><text x="842.182" y="-108.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">BlockRewardHbbft</text><polyline fill="none" stroke="#000" points="779.366 -100.5 904.999 -100.5"/><polyline fill="none" stroke="#000" points="779.366 -75.7 904.999 -75.7"/></g><g id="node15" class="node"><title>13</title><polygon fill="#f2f2f2" stroke="#000" points="464.245 -489.9 464.245 -614.7 1220.12 -614.7 1220.12 -489.9 464.245 -489.9"/><text x="842.182" y="-598.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">BlockRewardHbbftCoins</text><polyline fill="none" stroke="#000" points="464.245 -589.9 1220.12 -589.9"/><polyline fill="none" stroke="#000" points="464.245 -565.1 1220.12 -565.1"/><text x="472.245" y="-548.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="472.245" y="-531.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">transferReward(_nativeCoins: uint256, _to: address)</text><text x="472.245" y="-514.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getDelegatorReward(_delegatorStake: uint256, _stakingEpoch: uint256, _poolMiningAddress: address): (nativeReward: uint256)</text><text x="472.245" y="-498.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getValidatorReward(_stakingEpoch: uint256, _poolMiningAddress: address): (nativeReward: uint256)</text></g><g id="edge7" class="edge"><title>0-&gt;13</title><path fill="none" stroke="#000" d="M842.1824,-125.3027C842.1824,-197.1702 842.1824,-357.0198 842.1824,-459.4549"/><polygon fill="none" stroke="#000" points="831.683 -459.558 842.182 -489.558 852.683 -459.558 831.683 -459.558"/></g><g id="node3" class="node"><title>3</title><polygon fill="#f2f2f2" stroke="#000" points="7438.002 -1676.5 7438.002 -2002.9 8008.363 -2002.9 8008.363 -1676.5 7438.002 -1676.5"/><text x="7723.182" y="-1986.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">KeyGenHistory</text><polyline fill="none" stroke="#000" points="7438.002 -1978.1 8008.363 -1978.1"/><text x="7446.002" y="-1961.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="7446.002" y="-1944.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorSet: address[]</text><text x="7446.002" y="-1927.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">parts: mapping(address=&gt;bytes)</text><text x="7446.002" y="-1911.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">acks: mapping(address=&gt;bytes[])</text><text x="7446.002" y="-1894.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorSetContract: IValidatorSetHbbft</text><polyline fill="none" stroke="#000" points="7438.002 -1886.1 8008.363 -1886.1"/><text x="7446.002" y="-1869.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="7446.002" y="-1852.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">clearPrevKeyGenState(_prevValidators: address[])</text><text x="7446.002" y="-1835.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">writePart(_part: bytes)</text><text x="7446.002" y="-1819.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">writeAck(_ack: bytes)</text><text x="7446.002" y="-1802.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="7446.002" y="-1785.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; NewValidatorsSet(newValidatorSet: address[])</text><text x="7446.002" y="-1768.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyInitialized()</text><text x="7446.002" y="-1751.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlySystem()</text><text x="7446.002" y="-1735.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyValidatorSet()</text><text x="7446.002" y="-1718.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(_validatorSetContract: address, _validators: address[], _parts: bytes[], _acks: bytes[][])</text><text x="7446.002" y="-1701.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getAcksLength(val: address): uint256</text><text x="7446.002" y="-1684.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isInitialized(): bool</text></g><g id="node23" class="node"><title>20</title><polygon fill="#f2f2f2" stroke="#000" points="6931.607 -2963.9 6931.607 -3088.7 7224.758 -3088.7 7224.758 -2963.9 6931.607 -2963.9"/><text x="7078.182" y="-3072.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="7078.182" y="-3055.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IKeyGenHistory</text><polyline fill="none" stroke="#000" points="6931.607 -3047.1 7224.758 -3047.1"/><polyline fill="none" stroke="#000" points="6931.607 -3022.3 7224.758 -3022.3"/><text x="6939.607" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="6939.607" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(address, address[], bytes[], bytes[][])</text><text x="6939.607" y="-2972.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">clearPrevKeyGenState(address[])</text></g><g id="edge9" class="edge"><title>3-&gt;20</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M7700.2197,-2003.2057C7666.7535,-2196.2529 7590.1078,-2520.2002 7429.1824,-2751 7373.4361,-2830.9516 7287.6696,-2898.8284 7214.8728,-2947.1795"/><polygon fill="none" stroke="#000" points="7208.709 -2938.661 7189.228 -2963.775 7220.119 -2956.291 7208.709 -2938.661"/></g><g id="edge10" class="edge"><title>3-&gt;28</title><path fill="none" stroke="#000" d="M7722.7223,-2003.2978C7712.3442,-2213.9383 7659.4528,-2573.8847 7429.1824,-2751 7368.8576,-2797.3996 6820.3004,-2774.7819 6745.1824,-2787 6516.6974,-2824.1636 6262.0848,-2898.7864 6088.6218,-2954.8742"/><polygon fill="#000" stroke="#000" points="6087.305 -2951.622 6078.871 -2958.035 6089.463 -2958.281 6087.305 -2951.622"/></g><g id="node38" class="node"><title>35</title><polygon fill="#f2f2f2" stroke="#000" points="7205.431 -3335.7 7205.431 -3443.7 7376.934 -3443.7 7376.934 -3335.7 7205.431 -3335.7"/><text x="7291.182" y="-3427.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">UpgradeabilityAdmin</text><polyline fill="none" stroke="#000" points="7205.431 -3418.9 7376.934 -3418.9"/><text x="7213.431" y="-3402.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7213.431" y="-3385.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">ADMIN_SLOT: bytes32</text><polyline fill="none" stroke="#000" points="7205.431 -3377.3 7376.934 -3377.3"/><text x="7213.431" y="-3360.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7213.431" y="-3343.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_admin(): (adm: address)</text></g><g id="edge8" class="edge"><title>3-&gt;35</title><path fill="none" stroke="#000" d="M7677.6656,-2003.0126C7586.2496,-2331.0097 7383.2071,-3059.5187 7314.4585,-3306.1861"/><polygon fill="none" stroke="#000" points="7304.243 -3303.729 7306.303 -3335.447 7324.472 -3309.367 7304.243 -3303.729"/></g><g id="node4" class="node"><title>4</title><polygon fill="#f2f2f2" stroke="#000" points="5598.142 -.5 5598.142 -175.7 5804.223 -175.7 5804.223 -.5 5598.142 -.5"/><text x="5701.182" y="-159.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Migrations</text><polyline fill="none" stroke="#000" points="5598.142 -150.9 5804.223 -150.9"/><text x="5606.142" y="-134.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="5606.142" y="-117.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">owner: address</text><text x="5606.142" y="-100.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">last_completed_migration: uint</text><polyline fill="none" stroke="#000" points="5598.142 -92.5 5804.223 -92.5"/><text x="5606.142" y="-75.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="5606.142" y="-59.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; restricted()</text><text x="5606.142" y="-42.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor()</text><text x="5606.142" y="-25.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setCompleted(completed: uint)</text><text x="5606.142" y="-8.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">upgrade(new_address: address)</text></g><g id="edge11" class="edge"><title>4-&gt;4</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5804.2718,-15.7358C5815.2042,-29.7677 5822.2228,-53.8891 5822.2228,-88.1 5822.2228,-116.1637 5817.4999,-137.4379 5809.7679,-151.9228"/><polygon fill="#000" stroke="#000" points="5806.74 -150.161 5804.272 -160.464 5812.626 -153.949 5806.74 -150.161"/></g><g id="node5" class="node"><title>5</title><polygon fill="#f2f2f2" stroke="#000" points="7162.271 -1701.7 7162.271 -1977.7 7420.093 -1977.7 7420.093 -1701.7 7162.271 -1701.7"/><text x="7291.182" y="-1961.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">RandomHbbft</text><polyline fill="none" stroke="#000" points="7162.271 -1952.9 7420.093 -1952.9"/><text x="7170.271" y="-1936.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="7170.271" y="-1919.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">currentSeed: uint256</text><text x="7170.271" y="-1902.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorSetContract: IValidatorSetHbbft</text><polyline fill="none" stroke="#000" points="7162.271 -1894.5 7420.093 -1894.5"/><text x="7170.271" y="-1877.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7170.271" y="-1861.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_initialize(_validatorSet: address)</text><text x="7170.271" y="-1844.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getCoinbase(): address</text><text x="7170.271" y="-1827.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="7170.271" y="-1810.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setCurrentSeed(_currentSeed: uint256)</text><text x="7170.271" y="-1793.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(_validatorSet: address)</text><text x="7170.271" y="-1777.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="7170.271" y="-1760.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyBlockReward()</text><text x="7170.271" y="-1743.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyInitialized()</text><text x="7170.271" y="-1726.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlySystem()</text><text x="7170.271" y="-1709.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isInitialized(): bool</text></g><g id="node26" class="node"><title>23</title><polygon fill="#f2f2f2" stroke="#000" points="6754.26 -2963.9 6754.26 -3088.7 6914.105 -3088.7 6914.105 -2963.9 6754.26 -2963.9"/><text x="6834.182" y="-3072.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="6834.182" y="-3055.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IRandomHbbft</text><polyline fill="none" stroke="#000" points="6754.26 -3047.1 6914.105 -3047.1"/><polyline fill="none" stroke="#000" points="6754.26 -3022.3 6914.105 -3022.3"/><text x="6762.26" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="6762.26" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(address)</text><text x="6762.26" y="-2972.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">currentSeed(): uint256</text></g><g id="edge13" class="edge"><title>5-&gt;23</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M7315.485,-1977.7475C7342.0129,-2177.7474 7356.8329,-2546.4698 7153.1824,-2751 7079.8683,-2824.6308 7002.5502,-2721.1406 6922.1824,-2787 6878.2736,-2822.9822 6856.2733,-2882.9689 6845.2504,-2933.879"/><polygon fill="none" stroke="#000" points="6834.862 -2932.315 6839.767 -2963.719 6855.516 -2936.111 6834.862 -2932.315"/></g><g id="edge14" class="edge"><title>5-&gt;28</title><path fill="none" stroke="#000" d="M7316.9988,-1977.8739C7345.87,-2179.7587 7364.112,-2552.8149 7153.1824,-2751 7086.8496,-2813.325 6834.7478,-2770.7988 6745.1824,-2787 6517.3915,-2828.2045 6262.6673,-2902.1781 6088.9885,-2957.0093"/><polygon fill="#000" stroke="#000" points="6087.704 -2953.745 6079.226 -2960.098 6089.816 -2960.419 6087.704 -2953.745"/></g><g id="edge12" class="edge"><title>5-&gt;35</title><path fill="none" stroke="#000" d="M7291.1824,-1977.9335C7291.1824,-2291.9245 7291.1824,-3051.296 7291.1824,-3305.324"/><polygon fill="none" stroke="#000" points="7280.682 -3305.403 7291.182 -3335.403 7301.682 -3305.403 7280.682 -3305.403"/></g><g id="node6" class="node"><title>6</title><polygon fill="#f2f2f2" stroke="#000" points="8403.929 -1760.5 8403.929 -1918.9 8736.436 -1918.9 8736.436 -1760.5 8403.929 -1760.5"/><text x="8570.182" y="-1902.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Owned</text><polyline fill="none" stroke="#000" points="8403.929 -1894.1 8736.436 -1894.1"/><text x="8411.929" y="-1877.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8411.929" y="-1860.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">owner: address</text><polyline fill="none" stroke="#000" points="8403.929 -1852.5 8736.436 -1852.5"/><text x="8411.929" y="-1835.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="8411.929" y="-1819.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setOwner(_new: address)</text><text x="8411.929" y="-1802.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8411.929" y="-1785.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; NewOwner(old: address, current: address)</text><text x="8411.929" y="-1768.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyOwner()</text></g><g id="node7" class="node"><title>7</title><polygon fill="#f2f2f2" stroke="#000" points="8743.605 -212.7 8743.605 -891.9 9190.759 -891.9 9190.759 -212.7 8743.605 -212.7"/><text x="8967.182" y="-875.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Registry</text><polyline fill="none" stroke="#000" points="8743.605 -867.1 9190.759 -867.1"/><text x="8751.605" y="-850.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="8751.605" y="-833.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">entries: mapping(bytes32=&gt;Entry)</text><text x="8751.605" y="-816.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reverses: mapping(address=&gt;string)</text><text x="8751.605" y="-800.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8751.605" y="-783.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">fee: uint256</text><polyline fill="none" stroke="#000" points="8743.605 -775.1 9190.759 -775.1"/><text x="8751.605" y="-758.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="8751.605" y="-741.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;payable&gt;&gt; reserve(_name: bytes32): (success: bool)</text><text x="8751.605" y="-724.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reserved(_name: bytes32): bool</text><text x="8751.605" y="-708.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">drop(_name: bytes32): (success: bool)</text><text x="8751.605" y="-691.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setData(_name: bytes32, _key: string, _value: bytes32): (success: bool)</text><text x="8751.605" y="-674.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setAddress(_name: bytes32, _key: string, _value: address): (success: bool)</text><text x="8751.605" y="-657.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setUint(_name: bytes32, _key: string, _value: uint): (success: bool)</text><text x="8751.605" y="-640.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">proposeReverse(_name: string, _who: address): (success: bool)</text><text x="8751.605" y="-624.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">confirmReverse(_name: string): (success: bool)</text><text x="8751.605" y="-607.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">confirmReverseAs(_name: string, _who: address): (success: bool)</text><text x="8751.605" y="-590.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removeReverse()</text><text x="8751.605" y="-573.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">transfer(_name: bytes32, _to: address): (success: bool)</text><text x="8751.605" y="-556.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">drain(): bool</text><text x="8751.605" y="-540.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getData(_name: bytes32, _key: string): bytes32</text><text x="8751.605" y="-523.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getAddress(_name: bytes32, _key: string): address</text><text x="8751.605" y="-506.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getUint(_name: bytes32, _key: string): uint</text><text x="8751.605" y="-489.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getOwner(_name: bytes32): address</text><text x="8751.605" y="-472.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">hasReverse(_name: bytes32): bool</text><text x="8751.605" y="-456.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getReverse(_name: bytes32): address</text><text x="8751.605" y="-439.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">canReverse(_data: address): bool</text><text x="8751.605" y="-422.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reverse(_data: address): string</text><text x="8751.605" y="-405.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setFee(_amount: uint): bool</text><text x="8751.605" y="-388.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8751.605" y="-372.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; Drained(amount: uint)</text><text x="8751.605" y="-355.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; FeeChanged(amount: uint)</text><text x="8751.605" y="-338.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; ReverseProposed(name: string, reverse: address)</text><text x="8751.605" y="-321.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; whenUnreserved(_name: bytes32)</text><text x="8751.605" y="-304.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyOwnerOf(_name: bytes32)</text><text x="8751.605" y="-288.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; whenProposed(_name: string)</text><text x="8751.605" y="-271.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; whenEntry(_name: string)</text><text x="8751.605" y="-254.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; whenEntryRaw(_name: bytes32)</text><text x="8751.605" y="-237.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; whenFeePaid()</text><text x="8751.605" y="-220.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor(_certifierContract: address, _owner: address)</text></g><g id="edge15" class="edge"><title>7-&gt;6</title><path fill="none" stroke="#000" d="M8759.9089,-892.119C8754.673,-904.2294 8749.7409,-916.3433 8745.1824,-928.4 8640.2138,-1206.0274 8595.6938,-1556.0405 8578.9822,-1730.4608"/><polygon fill="none" stroke="#000" points="8568.518 -1729.59 8576.221 -1760.427 8589.429 -1731.517 8568.518 -1729.59"/></g><g id="node24" class="node"><title>21</title><polygon fill="#f2f2f2" stroke="#000" points="8754.054 -1752.1 8754.054 -1927.3 9180.311 -1927.3 9180.311 -1752.1 8754.054 -1752.1"/><text x="8967.182" y="-1910.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="8967.182" y="-1893.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IMetadataRegistry</text><polyline fill="none" stroke="#000" points="8754.054 -1885.7 9180.311 -1885.7"/><polyline fill="none" stroke="#000" points="8754.054 -1860.9 9180.311 -1860.9"/><text x="8762.054" y="-1844.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="8762.054" y="-1827.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getData(_name: bytes32, _key: string): bytes32</text><text x="8762.054" y="-1810.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getAddress(_name: bytes32, _key: string): address</text><text x="8762.054" y="-1793.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getUint(_name: bytes32, _key: string): uint</text><text x="8762.054" y="-1777.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8762.054" y="-1760.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; DataChanged(name: bytes32, key: string, plainKey: string)</text></g><g id="edge16" class="edge"><title>7-&gt;21</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M8967.1824,-892.2332C8967.1824,-1166.1397 8967.1824,-1535.2601 8967.1824,-1721.5887"/><polygon fill="none" stroke="#000" points="8956.683 -1721.768 8967.182 -1751.768 8977.683 -1721.768 8956.683 -1721.768"/></g><g id="node25" class="node"><title>22</title><polygon fill="#f2f2f2" stroke="#000" points="9198.487 -1752.1 9198.487 -1927.3 9679.878 -1927.3 9679.878 -1752.1 9198.487 -1752.1"/><text x="9439.182" y="-1910.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="9439.182" y="-1893.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IOwnerRegistry</text><polyline fill="none" stroke="#000" points="9198.487 -1885.7 9679.878 -1885.7"/><polyline fill="none" stroke="#000" points="9198.487 -1860.9 9679.878 -1860.9"/><text x="9206.487" y="-1844.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="9206.487" y="-1827.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getOwner(_name: bytes32): address</text><text x="9206.487" y="-1810.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="9206.487" y="-1793.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; Reserved(name: bytes32, owner: address)</text><text x="9206.487" y="-1777.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; Transferred(name: bytes32, oldOwner: address, newOwner: address)</text><text x="9206.487" y="-1760.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; Dropped(name: bytes32, owner: address)</text></g><g id="edge17" class="edge"><title>7-&gt;22</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M9172.9889,-892.0797C9178.6632,-904.227 9184.0832,-916.3557 9189.1824,-928.4 9305.227,-1202.4969 9382.3555,-1545.8042 9417.4424,-1722.5494"/><polygon fill="none" stroke="#000" points="9407.143 -1724.594 9423.208 -1752.02 9427.753 -1720.562 9407.143 -1724.594"/></g><g id="node27" class="node"><title>24</title><polygon fill="#f2f2f2" stroke="#000" points="9697.765 -1735.3 9697.765 -1944.1 10074.6 -1944.1 10074.6 -1735.3 9697.765 -1735.3"/><text x="9886.182" y="-1927.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="9886.182" y="-1910.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IReverseRegistry</text><polyline fill="none" stroke="#000" points="9697.765 -1902.5 10074.6 -1902.5"/><polyline fill="none" stroke="#000" points="9697.765 -1877.7 10074.6 -1877.7"/><text x="9705.765" y="-1861.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="9705.765" y="-1844.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">hasReverse(_name: bytes32): bool</text><text x="9705.765" y="-1827.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getReverse(_name: bytes32): address</text><text x="9705.765" y="-1810.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">canReverse(_data: address): bool</text><text x="9705.765" y="-1793.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reverse(_data: address): string</text><text x="9705.765" y="-1777.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="9705.765" y="-1760.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; ReverseConfirmed(name: string, reverse: address)</text><text x="9705.765" y="-1743.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; ReverseRemoved(name: string, reverse: address)</text></g><g id="edge18" class="edge"><title>7-&gt;24</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M9190.8093,-612.6509C9353.4593,-668.1617 9565.9485,-766.8739 9689.1824,-928.4 9865.0511,-1158.916 9891.2558,-1513.0095 9891.1349,-1704.8851"/><polygon fill="none" stroke="#000" points="9880.634 -1705.008 9890.896 -1735.09 9901.633 -1705.175 9880.634 -1705.008"/></g><g id="node8" class="node"><title>7struct0</title><polygon fill="#f2f2f2" stroke="#000" points="8869.056 -29.7 8869.056 -146.5 9065.309 -146.5 9065.309 -29.7 8869.056 -29.7"/><text x="8967.182" y="-129.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;struct&gt;&gt;</text><text x="8967.182" y="-113.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Entry</text><polyline fill="none" stroke="#000" points="8869.056 -104.9 9065.309 -104.9"/><text x="8877.056" y="-88.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">owner: address</text><text x="8877.056" y="-71.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reverse: address</text><text x="8877.056" y="-54.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">deleted: bool</text><text x="8877.056" y="-37.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">data: mapping(string=&gt;bytes32)</text></g><g id="edge1" class="edge"><title>7struct0-&gt;7</title><path fill="none" stroke="#000" d="M8967.1824,-146.8913C8967.1824,-162.5212 8967.1824,-180.5872 8967.1824,-200.235"/><polygon fill="#000" stroke="#000" points="8967.183 -200.321 8971.182 -206.321 8967.182 -212.321 8963.182 -206.321 8967.183 -200.321"/></g><g id="node9" class="node"><title>8</title><polygon fill="#f2f2f2" stroke="#000" points="2740.464 -50.9 2740.464 -125.3 2831.901 -125.3 2831.901 -50.9 2740.464 -50.9"/><text x="2786.182" y="-108.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">StakingHbbft</text><polyline fill="none" stroke="#000" points="2740.464 -100.5 2831.901 -100.5"/><polyline fill="none" stroke="#000" points="2740.464 -75.7 2831.901 -75.7"/></g><g id="node19" class="node"><title>16</title><polygon fill="#f2f2f2" stroke="#000" points="2396.327 -473.1 2396.327 -631.5 3176.037 -631.5 3176.037 -473.1 2396.327 -473.1"/><text x="2786.182" y="-614.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">StakingHbbftCoins</text><polyline fill="none" stroke="#000" points="2396.327 -606.7 3176.037 -606.7"/><polyline fill="none" stroke="#000" points="2396.327 -581.9 3176.037 -581.9"/><text x="2404.327" y="-565.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="2404.327" y="-548.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_sendWithdrawnStakeAmount(_to: address, _amount: uint256)</text><text x="2404.327" y="-531.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="2404.327" y="-514.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; ClaimedReward(fromPoolStakingAddress: address, staker: address, stakingEpoch: uint256, nativeCoinsAmount: uint256)</text><text x="2404.327" y="-498.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">claimReward(_stakingEpochs: uint256[], _poolStakingAddress: address)</text><text x="2404.327" y="-481.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getRewardAmount(_stakingEpochs: uint256[], _poolStakingAddress: address, _staker: address): uint256</text></g><g id="edge19" class="edge"><title>8-&gt;16</title><path fill="none" stroke="#000" d="M2786.1824,-125.3027C2786.1824,-193.3483 2786.1824,-340.267 2786.1824,-442.647"/><polygon fill="none" stroke="#000" points="2775.682 -442.854 2786.182 -472.854 2796.682 -442.854 2775.682 -442.854"/></g><g id="node10" class="node"><title>2</title><polygon fill="#f2f2f2" stroke="#000" points="4500.242 -1794.1 4500.242 -1885.3 5946.123 -1885.3 5946.123 -1794.1 4500.242 -1794.1"/><text x="5223.182" y="-1868.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">InitializerHbbft</text><polyline fill="none" stroke="#000" points="4500.242 -1860.5 5946.123 -1860.5"/><polyline fill="none" stroke="#000" points="4500.242 -1835.7 5946.123 -1835.7"/><text x="4508.242" y="-1819.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="4508.242" y="-1802.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor(_contracts: address[], _owner: address, _miningAddresses: address[], _stakingAddresses: address[], _stakingParams: uint256[], _publicKeys: bytes32[], _internetAddresses: bytes16[], _parts: bytes[], _acks: bytes[][], _blockReward: uint256)</text></g><g id="node20" class="node"><title>17</title><polygon fill="#f2f2f2" stroke="#000" points="695.776 -2963.9 695.776 -3088.7 988.589 -3088.7 988.589 -2963.9 695.776 -2963.9"/><text x="842.182" y="-3072.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="842.182" y="-3055.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IBlockRewardHbbft</text><polyline fill="none" stroke="#000" points="695.776 -3047.1 988.589 -3047.1"/><polyline fill="none" stroke="#000" points="695.776 -3022.3 988.589 -3022.3"/><text x="703.776" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="703.776" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(address, uint256)</text><text x="703.776" y="-2972.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">epochsPoolGotRewardFor(address): uint256[]</text></g><g id="edge23" class="edge"><title>2-&gt;17</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5204.0315,-1885.4653C5135.5147,-2042.3817 4885.4584,-2559.4767 4491.1824,-2751 4316.5717,-2835.8188 1167.2447,-2693.3948 997.1824,-2787 932.5885,-2822.5536 890.6865,-2897.7515 866.9386,-2954.4212"/><polygon fill="#000" stroke="#000" points="863.688 -2953.123 863.14 -2963.703 870.167 -2955.774 863.688 -2953.123"/></g><g id="edge26" class="edge"><title>2-&gt;19</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5203.9899,-1885.3801C5135.3373,-2042.0177 4884.8906,-2558.3121 4491.1824,-2751 4380.3902,-2805.2237 2375.3985,-2721.0143 2271.1824,-2787 2213.3109,-2823.642 2182.9247,-2897.7956 2167.5803,-2953.9001"/><polygon fill="#000" stroke="#000" points="2164.136 -2953.237 2164.976 -2963.799 2170.905 -2955.018 2164.136 -2953.237"/></g><g id="edge22" class="edge"><title>2-&gt;20</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5242.6446,-1885.3492C5311.9568,-2041.326 5563.7417,-2554.3109 5955.1824,-2751 6051.3541,-2799.3239 6829.5977,-2733.8389 6923.1824,-2787 6987.059,-2823.2853 7028.9673,-2897.9274 7052.9103,-2954.2566"/><polygon fill="#000" stroke="#000" points="7049.821 -2955.943 7056.886 -2963.838 7056.286 -2953.26 7049.821 -2955.943"/></g><g id="edge24" class="edge"><title>2-&gt;23</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5246.206,-1885.519C5323.7884,-2035.0793 5591.3167,-2513.0172 5955.1824,-2751 6006.4324,-2784.5196 6029.4555,-2769.6429 6088.1824,-2787 6326.5408,-2857.4484 6604.7284,-2949.2556 6744.4283,-2996.0319"/><polygon fill="#000" stroke="#000" points="6743.651 -2999.463 6754.245 -2999.321 6745.875 -2992.825 6743.651 -2999.463"/></g><g id="node28" class="node"><title>25</title><polygon fill="#f2f2f2" stroke="#000" points="3273.814 -2787.5 3273.814 -3265.1 3834.55 -3265.1 3834.55 -2787.5 3273.814 -2787.5"/><text x="3554.182" y="-3248.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="3554.182" y="-3231.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IStakingHbbft</text><polyline fill="none" stroke="#000" points="3273.814 -3223.5 3834.55 -3223.5"/><polyline fill="none" stroke="#000" points="3273.814 -3198.7 3834.55 -3198.7"/><text x="3281.814" y="-3182.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="3281.814" y="-3165.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolDelegators(address): address[]</text><text x="3281.814" y="-3148.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">incrementStakingEpoch()</text><text x="3281.814" y="-3131.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removePool(address)</text><text x="3281.814" y="-3114.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removePools()</text><text x="3281.814" y="-3098.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setStakingEpochStartTime(uint256)</text><text x="3281.814" y="-3081.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolsLikelihood(): (uint256[], uint256)</text><text x="3281.814" y="-3064.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolsToBeElected(): address[]</text><text x="3281.814" y="-3047.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolsToBeRemoved(): address[]</text><text x="3281.814" y="-3030.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isPoolActive(address): bool</text><text x="3281.814" y="-3014.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">MAX_CANDIDATES(): uint256</text><text x="3281.814" y="-2997.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">orderedWithdrawAmount(address, address): uint256</text><text x="3281.814" y="-2980.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(address, address[], uint256, uint256, uint256, uint256, uint256, bytes32[], bytes16[])</text><text x="3281.814" y="-2963.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">rewardWasTaken(address, address, uint256): bool</text><text x="3281.814" y="-2946.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeAmount(address, address): uint256</text><text x="3281.814" y="-2930.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeAmountTotal(address): uint256</text><text x="3281.814" y="-2913.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeFirstEpoch(address, address): uint256</text><text x="3281.814" y="-2896.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeLastEpoch(address, address): uint256</text><text x="3281.814" y="-2879.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingWithdrawDisallowPeriod(): uint256</text><text x="3281.814" y="-2862.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingEpoch(): uint256</text><text x="3281.814" y="-2846.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingFixedEpochDuration(): uint256</text><text x="3281.814" y="-2829.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">startTimeOfNextPhaseTransition(): uint256</text><text x="3281.814" y="-2812.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingFixedEpochEndTime(): uint256</text><text x="3281.814" y="-2795.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingEpochStartTime(): uint256</text></g><g id="edge21" class="edge"><title>2-&gt;25</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5199.8166,-1885.4695C5121.4238,-2034.3669 4852.267,-2509.274 4491.1824,-2751 4296.9472,-2881.0297 4040.1798,-2950.8501 3844.5576,-2987.6"/><polygon fill="#000" stroke="#000" points="3843.894 -2984.163 3834.703 -2989.433 3845.175 -2991.045 3843.894 -2984.163"/></g><g id="edge25" class="edge"><title>2-&gt;27</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5203.7766,-1885.4621C5134.6481,-2041.8061 4883.389,-2555.8425 4491.1824,-2751 4369.1716,-2811.7112 3398.7409,-2759.8961 3265.1824,-2787 3083.6667,-2823.8362 2886.1491,-2909.5786 2765.2265,-2967.7692"/><polygon fill="#000" stroke="#000" points="2763.414 -2964.758 2755.933 -2972.26 2766.46 -2971.06 2763.414 -2964.758"/></g><g id="edge20" class="edge"><title>2-&gt;28</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M5248.535,-1885.4891C5329.76,-2032.1885 5587.5537,-2497.7867 5747.5959,-2786.837"/><polygon fill="#000" stroke="#000" points="5744.632 -2788.71 5752.538 -2795.763 5750.756 -2785.32 5744.632 -2788.71"/></g><g id="node11" class="node"><title>10</title><polygon fill="#f2f2f2" stroke="#000" points="5963.796 -1323.7 5963.796 -2355.7 7144.568 -2355.7 7144.568 -1323.7 5963.796 -1323.7"/><text x="6554.182" y="-2339.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">ValidatorSetHbbft</text><polyline fill="none" stroke="#000" points="5963.796 -2330.9 7144.568 -2330.9"/><text x="5971.796" y="-2314.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="5971.796" y="-2297.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_currentValidators: address[]</text><text x="5971.796" y="-2280.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_pendingValidators: address[]</text><text x="5971.796" y="-2263.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_previousValidators: address[]</text><text x="5971.796" y="-2247.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_maliceReportedForBlock: mapping(address=&gt;mapping(uint256=&gt;address[]))</text><text x="5971.796" y="-2230.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="5971.796" y="-2213.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">banCounter: mapping(address=&gt;uint256)</text><text x="5971.796" y="-2196.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">bannedUntil: mapping(address=&gt;uint256)</text><text x="5971.796" y="-2179.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">bannedDelegatorsUntil: mapping(address=&gt;uint256)</text><text x="5971.796" y="-2163.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">banReason: mapping(address=&gt;bytes32)</text><text x="5971.796" y="-2146.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">blockRewardContract: address</text><text x="5971.796" y="-2129.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isValidator: mapping(address=&gt;bool)</text><text x="5971.796" y="-2112.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isValidatorPrevious: mapping(address=&gt;bool)</text><text x="5971.796" y="-2095.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">miningByStakingAddress: mapping(address=&gt;address)</text><text x="5971.796" y="-2079.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">randomContract: address</text><text x="5971.796" y="-2062.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reportingCounter: mapping(address=&gt;mapping(uint256=&gt;uint256))</text><text x="5971.796" y="-2045.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reportingCounterTotal: mapping(uint256=&gt;uint256)</text><text x="5971.796" y="-2028.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingByMiningAddress: mapping(address=&gt;address)</text><text x="5971.796" y="-2011.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingContract: IStakingHbbft</text><text x="5971.796" y="-1995.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">keyGenHistoryContract: IKeyGenHistory</text><text x="5971.796" y="-1978.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorCounter: mapping(address=&gt;uint256)</text><text x="5971.796" y="-1961.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">MAX_VALIDATORS: uint256</text><polyline fill="none" stroke="#000" points="5963.796 -1953.3 7144.568 -1953.3"/><text x="5971.796" y="-1936.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="5971.796" y="-1919.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_clearReportingCounter(_miningAddress: address)</text><text x="5971.796" y="-1903.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_finalizeNewValidators()</text><text x="5971.796" y="-1886.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_incrementReportingCounter(_reportingMiningAddress: address)</text><text x="5971.796" y="-1869.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_removeMaliciousValidator(_miningAddress: address, _reason: bytes32): bool</text><text x="5971.796" y="-1852.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_removeMaliciousValidators(_miningAddresses: address[], _reason: bytes32)</text><text x="5971.796" y="-1835.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_savePreviousValidators()</text><text x="5971.796" y="-1819.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_setPendingValidators(_stakingAddresses: address[])</text><text x="5971.796" y="-1802.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_setStakingAddress(_miningAddress: address, _stakingAddress: address)</text><text x="5971.796" y="-1785.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_banUntil(): uint256</text><text x="5971.796" y="-1768.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getRandomIndex(_likelihood: uint256[], _likelihoodSum: uint256, _randomNumber: uint256): uint256</text><text x="5971.796" y="-1751.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="5971.796" y="-1735.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getCurrentTimestamp(): uint256</text><text x="5971.796" y="-1718.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(_blockRewardContract: address, _randomContract: address, _stakingContract: address, _keyGenHistoryContract: address, _initialMiningAddresses: address[], _initialStakingAddresses: address[])</text><text x="5971.796" y="-1701.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">finalizeChange()</text><text x="5971.796" y="-1684.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">newValidatorSet()</text><text x="5971.796" y="-1667.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removeMaliciousValidators(_miningAddresses: address[])</text><text x="5971.796" y="-1651.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reportMalicious(_maliciousMiningAddress: address, _blockNumber: uint256)</text><text x="5971.796" y="-1634.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setStakingAddress(_miningAddress: address, _stakingAddress: address)</text><text x="5971.796" y="-1617.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="5971.796" y="-1600.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; ReportedMalicious(reportingValidator: address, maliciousValidator: address, blockNumber: uint256)</text><text x="5971.796" y="-1583.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyBlockRewardContract()</text><text x="5971.796" y="-1567.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyRandomContract()</text><text x="5971.796" y="-1550.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyStakingContract()</text><text x="5971.796" y="-1533.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlySystem()</text><text x="5971.796" y="-1516.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyInitialized()</text><text x="5971.796" y="-1499.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">areDelegatorsBanned(_miningAddress: address): bool</text><text x="5971.796" y="-1483.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPreviousValidators(): address[]</text><text x="5971.796" y="-1466.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reportMaliciousCallable(_reportingMiningAddress: address, _maliciousMiningAddress: address, _blockNumber: uint256): (callable: bool, removeReportingValidator: bool)</text><text x="5971.796" y="-1449.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getValidators(): address[]</text><text x="5971.796" y="-1432.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isInitialized(): bool</text><text x="5971.796" y="-1415.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isReportValidatorValid(_miningAddress: address): bool</text><text x="5971.796" y="-1399.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isValidatorBanned(_miningAddress: address): bool</text><text x="5971.796" y="-1382.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isValidatorOrPending(_miningAddress: address): bool</text><text x="5971.796" y="-1365.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isPendingValidator(_miningAddress: address): bool</text><text x="5971.796" y="-1348.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">maliceReportedForBlock(_miningAddress: address, _blockNumber: uint256): address[]</text><text x="5971.796" y="-1331.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPendingValidators(): address[]</text></g><g id="edge31" class="edge"><title>10-&gt;20</title><path fill="none" stroke="#000" d="M6782.1112,-2355.8456C6884.4932,-2587.69 6993.9359,-2835.5236 7046.4649,-2954.4756"/><polygon fill="#000" stroke="#000" points="7043.365 -2956.119 7050.606 -2963.853 7049.768 -2953.292 7043.365 -2956.119"/></g><g id="edge32" class="edge"><title>10-&gt;23</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M6675.9764,-2355.8456C6730.6295,-2587.4575 6789.0479,-2835.0264 6817.1496,-2954.1172"/><polygon fill="#000" stroke="#000" points="6813.744 -2954.924 6819.447 -2963.853 6820.557 -2953.317 6813.744 -2954.924"/></g><g id="edge30" class="edge"><title>10-&gt;25</title><path fill="none" stroke="#000" d="M6323.178,-2355.7875C6230.3354,-2506.9209 6108.3566,-2656.7224 5955.1824,-2751 5944.0052,-2757.8795 4481.9212,-2922.3653 3845.0767,-2993.7438"/><polygon fill="#000" stroke="#000" points="3844.38 -2990.3 3834.832 -2994.892 3845.16 -2997.256 3844.38 -2990.3"/></g><g id="edge28" class="edge"><title>10-&gt;28</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M6261.0068,-2355.8456C6179.7287,-2498.9386 6094.9909,-2648.1223 6026.14,-2769.3367"/><polygon fill="none" stroke="#000" points="6016.935 -2764.282 6011.248 -2795.554 6035.195 -2774.654 6016.935 -2764.282"/></g><g id="node33" class="node"><title>30</title><polygon fill="#f2f2f2" stroke="#000" points="2280.266 -2947.1 2280.266 -3105.5 2512.099 -3105.5 2512.099 -2947.1 2280.266 -2947.1"/><text x="2396.182" y="-3088.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Library&gt;&gt;</text><text x="2396.182" y="-3072.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">SafeMath</text><polyline fill="none" stroke="#000" points="2280.266 -3063.9 2512.099 -3063.9"/><polyline fill="none" stroke="#000" points="2280.266 -3039.1 2512.099 -3039.1"/><text x="2288.266" y="-3022.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="2288.266" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">mul(a: uint256, b: uint256): uint256</text><text x="2288.266" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">div(a: uint256, b: uint256): uint256</text><text x="2288.266" y="-2972.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">sub(a: uint256, b: uint256): uint256</text><text x="2288.266" y="-2955.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">add(a: uint256, b: uint256): uint256</text></g><g id="edge29" class="edge"><title>10-&gt;30</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M6334.5325,-2355.7695C6241.3927,-2510.8164 6116.3593,-2662.9712 5955.1824,-2751 5787.6913,-2842.4773 2682.722,-2686.9888 2520.1824,-2787 2466.7981,-2819.8475 2435.33,-2883.8418 2417.4591,-2937.3926"/><polygon fill="#000" stroke="#000" points="2414.126 -2936.325 2414.385 -2946.916 2420.788 -2938.475 2414.126 -2936.325"/></g><g id="edge27" class="edge"><title>10-&gt;35</title><path fill="none" stroke="#000" d="M6820.9788,-2355.8754C6912.0767,-2497.1864 7024.0823,-2641.427 7153.1824,-2751 7183.2179,-2776.4925 7211.1823,-2755.0157 7234.1824,-2787 7263.7697,-2828.1446 7281.1289,-3149.397 7287.891,-3305.3328"/><polygon fill="none" stroke="#000" points="7277.408 -3305.967 7289.156 -3335.501 7298.39 -3305.087 7277.408 -3305.967"/></g><g id="node12" class="node"><title>1</title><polygon fill="#f2f2f2" stroke="#000" points="1296.59 -1676.5 1296.59 -2002.9 1685.775 -2002.9 1685.775 -1676.5 1296.59 -1676.5"/><text x="1491.182" y="-1986.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">CertifierHbbft</text><polyline fill="none" stroke="#000" points="1296.59 -1978.1 1685.775 -1978.1"/><text x="1304.59" y="-1961.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="1304.59" y="-1944.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_certified: mapping(address=&gt;bool)</text><text x="1304.59" y="-1927.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="1304.59" y="-1911.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorSetContract: IValidatorSetHbbft</text><polyline fill="none" stroke="#000" points="1296.59 -1902.9 1685.775 -1902.9"/><text x="1304.59" y="-1886.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="1304.59" y="-1869.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_certify(_who: address)</text><text x="1304.59" y="-1852.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="1304.59" y="-1835.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(_certifiedAddresses: address[], _validatorSet: address)</text><text x="1304.59" y="-1819.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">certify(_who: address)</text><text x="1304.59" y="-1802.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">revoke(_who: address)</text><text x="1304.59" y="-1785.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">certified(_who: address): bool</text><text x="1304.59" y="-1768.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">certifiedExplicitly(_who: address): bool</text><text x="1304.59" y="-1751.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="1304.59" y="-1735.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; Confirmed(who: address)</text><text x="1304.59" y="-1718.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; Revoked(who: address)</text><text x="1304.59" y="-1701.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyInitialized()</text><text x="1304.59" y="-1684.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isInitialized(): bool</text></g><g id="edge34" class="edge"><title>1-&gt;19</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M1475.726,-2002.9697C1466.0601,-2210.2578 1484.7485,-2563.4242 1695.1824,-2751 1751.8989,-2801.5557 1972.8674,-2743.5318 2035.1824,-2787 2084.6824,-2821.5291 2114.362,-2882.8974 2131.5743,-2934.8411"/><polygon fill="none" stroke="#000" points="2121.544 -2937.949 2140.218 -2963.669 2141.659 -2931.917 2121.544 -2937.949"/></g><g id="edge35" class="edge"><title>1-&gt;28</title><path fill="none" stroke="#000" d="M1473.3831,-2003.193C1460.723,-2213.2848 1475.6937,-2572.1737 1695.1824,-2751 1741.4463,-2788.693 3783.6406,-2783.0137 3843.1824,-2787 4513.8816,-2831.9028 5303.1013,-2940.7093 5671.3259,-2994.7545"/><polygon fill="#000" stroke="#000" points="5670.888 -2998.228 5681.29 -2996.219 5671.905 -2991.302 5670.888 -2998.228"/></g><g id="edge33" class="edge"><title>1-&gt;37</title><path fill="none" stroke="#000" d="M1503.5398,-2002.9028C1523.1723,-2191.7618 1572.7595,-2507.9157 1695.1824,-2751 1735.7475,-2831.5466 1805.0711,-2907.8619 1858.4702,-2959.622"/><polygon fill="none" stroke="#000" points="1851.611 -2967.587 1880.618 -2980.582 1866.046 -2952.334 1851.611 -2967.587"/></g><g id="node13" class="node"><title>11</title><polygon fill="#f2f2f2" stroke="#000" points="1006.361 -2980.7 1006.361 -3071.9 1214.004 -3071.9 1214.004 -2980.7 1006.361 -2980.7"/><text x="1110.182" y="-3055.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Sacrifice</text><polyline fill="none" stroke="#000" points="1006.361 -3047.1 1214.004 -3047.1"/><polyline fill="none" stroke="#000" points="1006.361 -3022.3 1214.004 -3022.3"/><text x="1014.361" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="1014.361" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor(_recipient: address)</text></g><g id="node14" class="node"><title>12</title><polygon fill="#f2f2f2" stroke="#000" points="405.691 -1550.5 405.691 -2128.9 1278.673 -2128.9 1278.673 -1550.5 405.691 -1550.5"/><text x="842.182" y="-2112.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">BlockRewardHbbftBase</text><polyline fill="none" stroke="#000" points="405.691 -2104.1 1278.673 -2104.1"/><text x="413.691" y="-2087.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="413.691" y="-2070.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_epochsPoolGotRewardFor: mapping(address=&gt;uint256[])</text><text x="413.691" y="-2053.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">VALIDATOR_MIN_REWARD_PERCENT: uint256</text><text x="413.691" y="-2037.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">REWARD_PERCENT_MULTIPLIER: uint256</text><text x="413.691" y="-2020.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="413.691" y="-2003.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">maxEpochReward: uint256</text><text x="413.691" y="-1986.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">epochPoolNativeReward: mapping(uint256=&gt;mapping(address=&gt;uint256))</text><text x="413.691" y="-1969.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">nativeRewardUndistributed: uint256</text><text x="413.691" y="-1953.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">snapshotPoolTotalStakeAmount: mapping(uint256=&gt;mapping(address=&gt;uint256))</text><text x="413.691" y="-1936.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">snapshotPoolValidatorStakeAmount: mapping(uint256=&gt;mapping(address=&gt;uint256))</text><text x="413.691" y="-1919.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorMinRewardPercent: mapping(uint256=&gt;uint256)</text><text x="413.691" y="-1902.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorSetContract: IValidatorSetHbbft</text><polyline fill="none" stroke="#000" points="405.691 -1894.5 1278.673 -1894.5"/><text x="413.691" y="-1877.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="413.691" y="-1861.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_distributeRewards(_stakingEpoch: uint256): uint256</text><text x="413.691" y="-1844.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_snapshotPoolStakeAmounts(_stakingContract: IStakingHbbft, _stakingEpoch: uint256, _miningAddress: address)</text><text x="413.691" y="-1827.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_transferNativeReward(_amount: uint256, _to: address)</text><text x="413.691" y="-1810.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="413.691" y="-1793.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(_validatorSet: address, _maxEpochReward: uint256)</text><text x="413.691" y="-1777.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">reward(_benefactors: address[], _kind: uint16[], _isEpochEndBlock: bool): (rewardsNative: uint256)</text><text x="413.691" y="-1760.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="413.691" y="-1743.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;fallback&gt;&gt; ()</text><text x="413.691" y="-1726.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; CoinsRewarded(rewards: uint256)</text><text x="413.691" y="-1709.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlySystem()</text><text x="413.691" y="-1693.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyStakingContract()</text><text x="413.691" y="-1676.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyValidatorSetContract()</text><text x="413.691" y="-1659.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyInitialized()</text><text x="413.691" y="-1642.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorShare(_stakingEpoch: uint256, _validatorStaked: uint256, _totalStaked: uint256, _poolReward: uint256): uint256</text><text x="413.691" y="-1625.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isInitialized(): bool</text><text x="413.691" y="-1609.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">epochsToClaimRewardFrom(_poolStakingAddress: address, _staker: address): (epochsToClaimFrom: uint256[])</text><text x="413.691" y="-1592.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorRewardPercent(_stakingAddress: address): uint256</text><text x="413.691" y="-1575.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">delegatorShare(_stakingEpoch: uint256, _delegatorStaked: uint256, _validatorStaked: uint256, _totalStaked: uint256, _poolReward: uint256): uint256</text><text x="413.691" y="-1558.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">epochsPoolGotRewardFor(_miningAddress: address): uint256[]</text></g><g id="edge41" class="edge"><title>12-&gt;11</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M907.5712,-2129.216C971.5676,-2412.5674 1064.1566,-2822.5158 1097.5667,-2970.4424"/><polygon fill="#000" stroke="#000" points="1094.158 -2971.236 1099.775 -2980.219 1100.986 -2969.694 1094.158 -2971.236"/></g><g id="edge37" class="edge"><title>12-&gt;17</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M842.1824,-2129.216C842.1824,-2391.6739 842.1824,-2762.7474 842.1824,-2933.6013"/><polygon fill="none" stroke="#000" points="831.683 -2933.819 842.182 -2963.819 852.683 -2933.819 831.683 -2933.819"/></g><g id="edge40" class="edge"><title>12-&gt;25</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M899.8727,-2129.0126C958.6606,-2340.527 1072.8479,-2613.5201 1287.1824,-2751 1357.0192,-2795.7952 2698.2999,-2773.6195 2780.1824,-2787 2943.6911,-2813.7191 3120.6005,-2866.5143 3263.9604,-2915.7318"/><polygon fill="#000" stroke="#000" points="3263.194 -2919.17 3273.789 -2919.118 3265.474 -2912.552 3263.194 -2919.17"/></g><g id="edge39" class="edge"><title>12-&gt;28</title><path fill="none" stroke="#000" d="M899.3311,-2129.0744C957.8662,-2340.991 1071.9757,-2614.4782 1287.1824,-2751 1347.1423,-2789.037 3772.3277,-2782.3515 3843.1824,-2787 4513.9411,-2831.0058 5303.1325,-2940.2383 5671.3382,-2994.5689"/><polygon fill="#000" stroke="#000" points="5670.898 -2998.042 5681.302 -2996.041 5671.921 -2991.117 5670.898 -2998.042"/></g><g id="edge38" class="edge"><title>12-&gt;30</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M900.5913,-2129.0772C959.7061,-2340.0745 1073.9854,-2612.3673 1287.1824,-2751 1378.9028,-2810.6418 2178.6617,-2728.6073 2271.1824,-2787 2324.0763,-2820.383 2355.7914,-2883.9855 2374.0351,-2937.2319"/><polygon fill="#000" stroke="#000" points="2370.819 -2938.653 2377.287 -2947.044 2377.463 -2936.451 2370.819 -2938.653"/></g><g id="edge36" class="edge"><title>12-&gt;37</title><path fill="none" stroke="#000" d="M924.1383,-2129.0155C992.9629,-2326.4416 1109.1017,-2581.8454 1287.1824,-2751 1436.132,-2892.4836 1668.8935,-2966.9892 1810.5919,-3001.3897"/><polygon fill="none" stroke="#000" points="1808.64 -3011.717 1840.243 -3008.325 1813.423 -2991.269 1808.64 -3011.717"/></g><g id="edge42" class="edge"><title>13-&gt;12</title><path fill="none" stroke="#000" d="M842.1824,-614.8291C842.1824,-776.0111 842.1824,-1214.3958 842.1824,-1520.3837"/><polygon fill="none" stroke="#000" points="831.683 -1520.496 842.182 -1550.496 852.683 -1520.496 831.683 -1520.496"/></g><g id="node21" class="node"><title>18</title><polygon fill="#f2f2f2" stroke="#000" points="0 -1768.9 0 -1910.5 350.365 -1910.5 350.365 -1768.9 0 -1768.9"/><text x="175.182" y="-1893.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="175.182" y="-1877.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IBlockRewardHbbftCoins</text><polyline fill="none" stroke="#000" points="0 -1868.9 350.365 -1868.9"/><polyline fill="none" stroke="#000" points="0 -1844.1 350.365 -1844.1"/><text x="8" y="-1827.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="8" y="-1810.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">transferReward(uint256, payable: address)</text><text x="8" y="-1793.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getDelegatorReward(uint256, uint256, address): uint256</text><text x="8" y="-1777.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getValidatorReward(uint256, address): uint256</text></g><g id="edge43" class="edge"><title>13-&gt;18</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M721.3718,-614.751C610.6929,-678.4444 451.2364,-787.7783 364.1824,-928.4 203.4002,-1188.1176 177.0144,-1561.2058 174.2105,-1738.5954"/><polygon fill="none" stroke="#000" points="163.711 -1738.521 173.936 -1768.616 184.71 -1738.713 163.711 -1738.521"/></g><g id="node16" class="node"><title>14</title><polygon fill="#f2f2f2" stroke="#000" points="2626.463 -928.9 2626.463 -2750.5 4481.902 -2750.5 4481.902 -928.9 2626.463 -928.9"/><text x="3554.182" y="-2733.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Abstract&gt;&gt;</text><text x="3554.182" y="-2717.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">StakingHbbftBase</text><polyline fill="none" stroke="#000" points="2626.463 -2708.9 4481.902 -2708.9"/><text x="2634.463" y="-2692.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="2634.463" y="-2675.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_pools: address[]</text><text x="2634.463" y="-2658.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_poolsInactive: address[]</text><text x="2634.463" y="-2641.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_poolsToBeElected: address[]</text><text x="2634.463" y="-2625.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_poolsToBeRemoved: address[]</text><text x="2634.463" y="-2608.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_poolsLikelihood: uint256[]</text><text x="2634.463" y="-2591.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_poolsLikelihoodSum: uint256</text><text x="2634.463" y="-2574.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_poolDelegators: mapping(address=&gt;address[])</text><text x="2634.463" y="-2557.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_poolDelegatorsInactive: mapping(address=&gt;address[])</text><text x="2634.463" y="-2541.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_stakeAmountByEpoch: mapping(address=&gt;mapping(address=&gt;mapping(uint256=&gt;uint256)))</text><text x="2634.463" y="-2524.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="2634.463" y="-2507.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">candidateMinStake: uint256</text><text x="2634.463" y="-2490.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">delegatorMinStake: uint256</text><text x="2634.463" y="-2473.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">delegatorStakeSnapshot: mapping(address=&gt;mapping(address=&gt;mapping(uint256=&gt;uint256)))</text><text x="2634.463" y="-2457.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">orderedWithdrawAmount: mapping(address=&gt;mapping(address=&gt;uint256))</text><text x="2634.463" y="-2440.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">orderedWithdrawAmountTotal: mapping(address=&gt;uint256)</text><text x="2634.463" y="-2423.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">orderWithdrawEpoch: mapping(address=&gt;mapping(address=&gt;uint256))</text><text x="2634.463" y="-2406.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolDelegatorIndex: mapping(address=&gt;mapping(address=&gt;uint256))</text><text x="2634.463" y="-2389.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolDelegatorInactiveIndex: mapping(address=&gt;mapping(address=&gt;uint256))</text><text x="2634.463" y="-2373.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolInactiveIndex: mapping(address=&gt;uint256)</text><text x="2634.463" y="-2356.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolIndex: mapping(address=&gt;uint256)</text><text x="2634.463" y="-2339.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolToBeElectedIndex: mapping(address=&gt;uint256)</text><text x="2634.463" y="-2322.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolToBeRemovedIndex: mapping(address=&gt;uint256)</text><text x="2634.463" y="-2305.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">rewardWasTaken: mapping(address=&gt;mapping(address=&gt;mapping(uint256=&gt;bool)))</text><text x="2634.463" y="-2289.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeAmount: mapping(address=&gt;mapping(address=&gt;uint256))</text><text x="2634.463" y="-2272.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeFirstEpoch: mapping(address=&gt;mapping(address=&gt;uint256))</text><text x="2634.463" y="-2255.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeLastEpoch: mapping(address=&gt;mapping(address=&gt;uint256))</text><text x="2634.463" y="-2238.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingWithdrawDisallowPeriod: uint256</text><text x="2634.463" y="-2221.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingEpoch: uint256</text><text x="2634.463" y="-2205.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingFixedEpochDuration: uint256</text><text x="2634.463" y="-2188.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingTransitionTimeframeLength: uint256</text><text x="2634.463" y="-2171.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingEpochStartTime: uint256</text><text x="2634.463" y="-2154.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeAmountTotal: mapping(address=&gt;uint256)</text><text x="2634.463" y="-2137.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">validatorSetContract: IValidatorSetHbbft</text><text x="2634.463" y="-2121.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolInfo: mapping(address=&gt;PoolInfo)</text><text x="2634.463" y="-2104.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">MAX_CANDIDATES: uint256</text><polyline fill="none" stroke="#000" points="2626.463 -2096.1 4481.902 -2096.1"/><text x="2634.463" y="-2079.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="2634.463" y="-2062.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;abstract&gt;&gt; _sendWithdrawnStakeAmount(_to: address, _amount: uint256)</text><text x="2634.463" y="-2045.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_removePoolDelegatorInactive(_poolStakingAddress: address, _delegator: address)</text><text x="2634.463" y="-2029.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_addPoolToBeElected(_stakingAddress: address)</text><text x="2634.463" y="-2012.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_addPoolToBeRemoved(_stakingAddress: address)</text><text x="2634.463" y="-1995.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_deletePoolToBeElected(_stakingAddress: address)</text><text x="2634.463" y="-1978.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_deletePoolToBeRemoved(_stakingAddress: address)</text><text x="2634.463" y="-1961.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_removePool(_stakingAddress: address)</text><text x="2634.463" y="-1945.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_removePoolInactive(_stakingAddress: address)</text><text x="2634.463" y="-1928.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_initialize(_validatorSetContract: address, _initialStakingAddresses: address[], _delegatorMinStake: uint256, _candidateMinStake: uint256, _publicKeys: bytes32[], _internetAddresses: bytes16[])</text><text x="2634.463" y="-1911.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_addPoolDelegator(_poolStakingAddress: address, _delegator: address)</text><text x="2634.463" y="-1894.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_addPoolDelegatorInactive(_poolStakingAddress: address, _delegator: address)</text><text x="2634.463" y="-1877.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_removePoolDelegator(_poolStakingAddress: address, _delegator: address)</text><text x="2634.463" y="-1861.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_addPoolInactive(_stakingAddress: address)</text><text x="2634.463" y="-1844.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_addPoolActive(_stakingAddress: address, _toBeElected: bool)</text><text x="2634.463" y="-1827.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_setLikelihood(_poolStakingAddress: address)</text><text x="2634.463" y="-1810.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_snapshotDelegatorStake(_poolStakingAddress: address, _delegator: address)</text><text x="2634.463" y="-1793.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_stake(_poolStakingAddress: address, _staker: address, _amount: uint256)</text><text x="2634.463" y="-1777.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_withdraw(_poolStakingAddress: address, _staker: address, _amount: uint256)</text><text x="2634.463" y="-1760.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_withdrawCheckPool(_poolStakingAddress: address, _staker: address)</text><text x="2634.463" y="-1743.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getDelegatorStake(_epoch: uint256, _firstEpoch: uint256, _prevDelegatorStake: uint256, _poolStakingAddress: address, _delegator: address): (delegatorStake: uint256)</text><text x="2634.463" y="-1726.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_getMaxCandidates(): uint256</text><text x="2634.463" y="-1709.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_isPoolEmpty(_poolStakingAddress: address): bool</text><text x="2634.463" y="-1693.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_isPoolToBeElected(_stakingAddress: address): (toBeElected: bool, index: uint256)</text><text x="2634.463" y="-1676.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_isWithdrawAllowed(_miningAddress: address, _isDelegator: bool): bool</text><text x="2634.463" y="-1659.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="2634.463" y="-1642.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;payable&gt;&gt; addPool(_miningAddress: address, _publicKey: bytes, _ip: bytes16)</text><text x="2634.463" y="-1625.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;payable&gt;&gt; stake(_toPoolStakingAddress: address)</text><text x="2634.463" y="-1609.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">incrementStakingEpoch()</text><text x="2634.463" y="-1592.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">initialize(_validatorSetContract: address, _initialStakingAddresses: address[], _delegatorMinStake: uint256, _candidateMinStake: uint256, _stakingFixedEpochDuration: uint256, _stakingTransitionTimeframeLength: uint256, _stakingWithdrawDisallowPeriod: uint256, _publicKeys: bytes32[], _internetAddresses: bytes16[])</text><text x="2634.463" y="-1575.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removePool(_stakingAddress: address)</text><text x="2634.463" y="-1558.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removePools()</text><text x="2634.463" y="-1541.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">removeMyPool()</text><text x="2634.463" y="-1525.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setStakingEpochStartTime(_timestamp: uint256)</text><text x="2634.463" y="-1508.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">moveStake(_fromPoolStakingAddress: address, _toPoolStakingAddress: address, _amount: uint256)</text><text x="2634.463" y="-1491.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolsToBeRemoved(): address[]</text><text x="2634.463" y="-1474.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">withdraw(_fromPoolStakingAddress: address, _amount: uint256)</text><text x="2634.463" y="-1457.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setPoolInfo(_publicKey: bytes, _ip: bytes16)</text><text x="2634.463" y="-1441.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">claimOrderedWithdraw(_poolStakingAddress: address)</text><text x="2634.463" y="-1424.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setCandidateMinStake(_minStake: uint256)</text><text x="2634.463" y="-1407.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">setDelegatorMinStake(_minStake: uint256)</text><text x="2634.463" y="-1390.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPools(): address[]</text><text x="2634.463" y="-1373.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolPublicKey(_poolAddress: address): bytes</text><text x="2634.463" y="-1357.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolInternetAddress(_poolAddress: address): bytes16</text><text x="2634.463" y="-1340.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolsInactive(): address[]</text><text x="2634.463" y="-1323.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolsLikelihood(): (likelihoods: uint256[], sum: uint256)</text><text x="2634.463" y="-1306.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">getPoolsToBeElected(): address[]</text><text x="2634.463" y="-1289.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">orderWithdraw(_poolStakingAddress: address, _amount: int256)</text><text x="2634.463" y="-1273.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="2634.463" y="-1256.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;fallback&gt;&gt; ()</text><text x="2634.463" y="-1239.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; ClaimedOrderedWithdrawal(fromPoolStakingAddress: address, staker: address, stakingEpoch: uint256, amount: uint256)</text><text x="2634.463" y="-1222.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; OrderedWithdrawal(fromPoolStakingAddress: address, staker: address, stakingEpoch: uint256, amount: int256)</text><text x="2634.463" y="-1205.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; PlacedStake(toPoolStakingAddress: address, staker: address, stakingEpoch: uint256, amount: uint256)</text><text x="2634.463" y="-1189.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; WithdrewStake(fromPoolStakingAddress: address, staker: address, stakingEpoch: uint256, amount: uint256)</text><text x="2634.463" y="-1172.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; MovedStake(fromPoolStakingAddress: address, toPoolStakingAddress: address, staker: address, stakingEpoch: uint256, amount: uint256)</text><text x="2634.463" y="-1155.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; gasPriceIsValid()</text><text x="2634.463" y="-1138.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyBlockRewardContract()</text><text x="2634.463" y="-1121.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyInitialized()</text><text x="2634.463" y="-1105.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; onlyValidatorSetContract()</text><text x="2634.463" y="-1088.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakingFixedEpochEndTime(): uint256</text><text x="2634.463" y="-1071.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isInitialized(): bool</text><text x="2634.463" y="-1054.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isPoolActive(_stakingAddress: address): bool</text><text x="2634.463" y="-1037.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">maxWithdrawAllowed(_poolStakingAddress: address, _staker: address): uint256</text><text x="2634.463" y="-1021.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">maxWithdrawOrderAllowed(_poolStakingAddress: address, _staker: address): uint256</text><text x="2634.463" y="-1004.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolDelegators(_poolStakingAddress: address): address[]</text><text x="2634.463" y="-987.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">poolDelegatorsInactive(_poolStakingAddress: address): address[]</text><text x="2634.463" y="-970.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">stakeAmountByCurrentEpoch(_poolStakingAddress: address, _staker: address): uint256</text><text x="2634.463" y="-953.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">startTimeOfNextPhaseTransition(): uint256</text><text x="2634.463" y="-937.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">areStakeAndWithdrawAllowed(): bool</text></g><g id="edge45" class="edge"><title>14-&gt;25</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M3554.1824,-2750.7141C3554.1824,-2752.8562 3554.1824,-2754.9904 3554.1824,-2757.1166"/><polygon fill="none" stroke="#000" points="3543.682 -2757.272 3554.182 -2787.273 3564.682 -2757.273 3543.682 -2757.272"/></g><g id="edge47" class="edge"><title>14-&gt;28</title><path fill="none" stroke="#000" d="M4482.1513,-2746.2141C4485.1585,-2747.822 4488.1689,-2749.4174 4491.1824,-2751 4693.6065,-2857.3068 5335.1922,-2954.4731 5670.8768,-2999.6571"/><polygon fill="#000" stroke="#000" points="5670.834 -3003.183 5681.211 -3001.045 5671.765 -2996.245 5670.834 -3003.183"/></g><g id="edge46" class="edge"><title>14-&gt;30</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M2626.17,-2745.2866C2623.1759,-2747.2017 2620.18,-2749.1063 2617.1824,-2751 2578.306,-2775.56 2554.6308,-2756.539 2520.1824,-2787 2474.985,-2826.9657 2443.86,-2887.3791 2424.0975,-2937.5036"/><polygon fill="#000" stroke="#000" points="2420.745 -2936.469 2420.417 -2947.059 2427.278 -2938.985 2420.745 -2936.469"/></g><g id="edge44" class="edge"><title>14-&gt;37</title><path fill="none" stroke="#000" d="M2626.1194,-2746.9982C2623.1444,-2748.3459 2620.1654,-2749.6799 2617.1824,-2751 2498.6868,-2803.4395 2141.0334,-2712.2559 2035.1824,-2787 1982.0154,-2824.5425 1956.384,-2895.6546 1944.1352,-2950.6418"/><polygon fill="none" stroke="#000" points="1933.769 -2948.945 1938.426 -2980.387 1954.393 -2952.904 1933.769 -2948.945"/></g><g id="node17" class="node"><title>14struct0</title><polygon fill="#f2f2f2" stroke="#000" points="3476.396 -510.7 3476.396 -593.9 3631.969 -593.9 3631.969 -510.7 3476.396 -510.7"/><text x="3554.182" y="-577.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;struct&gt;&gt;</text><text x="3554.182" y="-560.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">PoolInfo</text><polyline fill="none" stroke="#000" points="3476.396 -552.3 3631.969 -552.3"/><text x="3484.396" y="-535.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">publicKey: bytes</text><text x="3484.396" y="-518.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">internetAddress: bytes16</text></g><g id="edge2" class="edge"><title>14struct0-&gt;14</title><path fill="none" stroke="#000" d="M3554.1824,-594.0384C3554.1824,-654.2646 3554.1824,-774.0944 3554.1824,-916.591"/><polygon fill="#000" stroke="#000" points="3554.182 -916.662 3558.182 -922.662 3554.182 -928.662 3550.182 -922.662 3554.182 -916.662"/></g><g id="node18" class="node"><title>15</title><polygon fill="#f2f2f2" stroke="#000" points="2400.361 -1794.1 2400.361 -1885.3 2608.004 -1885.3 2608.004 -1794.1 2400.361 -1794.1"/><text x="2504.182" y="-1868.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Sacrifice2</text><polyline fill="none" stroke="#000" points="2400.361 -1860.5 2608.004 -1860.5"/><polyline fill="none" stroke="#000" points="2400.361 -1835.7 2608.004 -1835.7"/><text x="2408.361" y="-1819.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="2408.361" y="-1802.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor(_recipient: address)</text></g><g id="edge48" class="edge"><title>16-&gt;14</title><path fill="none" stroke="#000" d="M2833.6447,-631.8611C2871.4578,-695.2473 2928.9389,-791.6029 2995.2763,-902.8045"/><polygon fill="none" stroke="#000" points="2986.317 -908.282 3010.704 -928.667 3004.352 -897.523 2986.317 -908.282"/></g><g id="edge51" class="edge"><title>16-&gt;15</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M2741.984,-631.8365C2702.7287,-706.2122 2647.0814,-821.5487 2617.1824,-928.4 2529.0651,-1243.3084 2509.6097,-1638.6222 2505.3568,-1783.328"/><polygon fill="#000" stroke="#000" points="2501.847 -1783.621 2505.065 -1793.716 2508.845 -1783.818 2501.847 -1783.621"/></g><g id="edge50" class="edge"><title>16-&gt;17</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M2495.3879,-631.531C2184.5759,-712.5052 1676.0817,-834.3605 1229.1824,-892.4 1183.3022,-898.3585 429.1821,-894.9857 397.1824,-928.4 362.1655,-964.9648 372.5383,-2706.7751 397.1824,-2751 458.5042,-2861.0448 583.9642,-2932.6495 686.0842,-2975.1694"/><polygon fill="#000" stroke="#000" points="684.997 -2978.507 695.577 -2979.067 687.656 -2972.031 684.997 -2978.507"/></g><g id="edge49" class="edge"><title>16-&gt;18</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M2495.7645,-631.5838C2185.0009,-712.6795 1676.3009,-834.7066 1229.1824,-892.4 1181.4807,-898.5551 400.8466,-897.27 364.1824,-928.4 117.5772,-1137.7822 141.1021,-1577.0623 163.0649,-1758.5675"/><polygon fill="#000" stroke="#000" points="159.603 -1759.089 164.307 -1768.582 166.549 -1758.227 159.603 -1759.089"/></g><g id="node29" class="node"><title>26</title><polygon fill="#f2f2f2" stroke="#000" points="9083.798 -42.5 9083.798 -133.7 9212.567 -133.7 9212.567 -42.5 9083.798 -42.5"/><text x="9148.182" y="-117.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Interface&gt;&gt;</text><text x="9148.182" y="-100.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">IStakingHbbftCoins</text><polyline fill="none" stroke="#000" points="9083.798 -92.1 9212.567 -92.1"/><polyline fill="none" stroke="#000" points="9083.798 -67.3 9212.567 -67.3"/></g><g id="node32" class="node"><title>29</title><polygon fill="#f2f2f2" stroke="#000" points="7647.158 -3556.3 7647.158 -3664.3 7869.207 -3664.3 7869.207 -3556.3 7647.158 -3556.3"/><text x="7758.182" y="-3647.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Library&gt;&gt;</text><text x="7758.182" y="-3630.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">OpenZeppelinUpgradesAddress</text><polyline fill="none" stroke="#000" points="7647.158 -3622.7 7869.207 -3622.7"/><polyline fill="none" stroke="#000" points="7647.158 -3597.9 7869.207 -3597.9"/><text x="7655.158" y="-3581.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7655.158" y="-3564.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">isContract(account: address): bool</text></g><g id="node34" class="node"><title>31</title><polygon fill="#f2f2f2" stroke="#000" points="8026.538 -1794.1 8026.538 -1885.3 8385.827 -1885.3 8385.827 -1794.1 8026.538 -1794.1"/><text x="8206.182" y="-1868.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">AdminUpgradeabilityProxy</text><polyline fill="none" stroke="#000" points="8026.538 -1860.5 8385.827 -1860.5"/><polyline fill="none" stroke="#000" points="8026.538 -1835.7 8385.827 -1835.7"/><text x="8034.538" y="-1819.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8034.538" y="-1802.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor(_logic: address, _admin: address, _data: bytes)</text></g><g id="node35" class="node"><title>32</title><polygon fill="#f2f2f2" stroke="#000" points="7602.875 -2905.1 7602.875 -3147.5 8057.49 -3147.5 8057.49 -2905.1 7602.875 -2905.1"/><text x="7830.182" y="-3130.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">BaseAdminUpgradeabilityProxy</text><polyline fill="none" stroke="#000" points="7602.875 -3122.7 8057.49 -3122.7"/><polyline fill="none" stroke="#000" points="7602.875 -3097.9 8057.49 -3097.9"/><text x="7610.875" y="-3081.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7610.875" y="-3064.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_setAdmin(newAdmin: address)</text><text x="7610.875" y="-3047.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">External:</text><text x="7610.875" y="-3030.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;payable&gt;&gt; upgradeToAndCall(newImplementation: address, data: bytes)</text><text x="7610.875" y="-3014.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">admin(): address</text><text x="7610.875" y="-2997.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">implementation(): address</text><text x="7610.875" y="-2980.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">changeAdmin(newAdmin: address)</text><text x="7610.875" y="-2963.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">upgradeTo(newImplementation: address)</text><text x="7610.875" y="-2946.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="7610.875" y="-2930.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; AdminChanged(previousAdmin: address, newAdmin: address)</text><text x="7610.875" y="-2913.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;modifier&gt;&gt; ifAdmin()</text></g><g id="edge52" class="edge"><title>31-&gt;32</title><path fill="none" stroke="#000" d="M8203.0014,-1885.66C8192.2164,-2022.5354 8149.9727,-2437.4314 8017.1824,-2751 7998.3817,-2795.3956 7971.9696,-2840.0986 7944.9055,-2880.1918"/><polygon fill="none" stroke="#000" points="7936.278 -2874.208 7927.801 -2904.841 7953.53 -2886.18 7936.278 -2874.208"/></g><g id="node39" class="node"><title>36</title><polygon fill="#f2f2f2" stroke="#000" points="8075.721 -2980.7 8075.721 -3071.9 8336.644 -3071.9 8336.644 -2980.7 8075.721 -2980.7"/><text x="8206.182" y="-3055.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">UpgradeabilityProxy</text><polyline fill="none" stroke="#000" points="8075.721 -3047.1 8336.644 -3047.1"/><polyline fill="none" stroke="#000" points="8075.721 -3022.3 8336.644 -3022.3"/><text x="8083.721" y="-3005.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="8083.721" y="-2988.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">constructor(_logic: address, _data: bytes)</text></g><g id="edge53" class="edge"><title>31-&gt;36</title><path fill="none" stroke="#000" d="M8206.1824,-1885.4891C8206.1824,-2065.4368 8206.1824,-2725.2159 8206.1824,-2950.396"/><polygon fill="none" stroke="#000" points="8195.683 -2950.647 8206.182 -2980.647 8216.683 -2950.647 8195.683 -2950.647"/></g><g id="node36" class="node"><title>33</title><polygon fill="#f2f2f2" stroke="#000" points="7862.253 -3302.1 7862.253 -3477.3 8174.111 -3477.3 8174.111 -3302.1 7862.253 -3302.1"/><text x="8018.182" y="-3460.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">BaseUpgradeabilityProxy</text><polyline fill="none" stroke="#000" points="7862.253 -3452.5 8174.111 -3452.5"/><text x="7870.253" y="-3435.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7870.253" y="-3419.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">IMPLEMENTATION_SLOT: bytes32</text><polyline fill="none" stroke="#000" points="7862.253 -3410.9 8174.111 -3410.9"/><text x="7870.253" y="-3394.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7870.253" y="-3377.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_implementation(): (impl: address)</text><text x="7870.253" y="-3360.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_upgradeTo(newImplementation: address)</text><text x="7870.253" y="-3343.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_setImplementation(newImplementation: address)</text><text x="7870.253" y="-3327.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="7870.253" y="-3310.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;event&gt;&gt; Upgraded(implementation: address)</text></g><g id="edge55" class="edge"><title>32-&gt;33</title><path fill="none" stroke="#000" d="M7892.9143,-3147.5595C7914.2213,-3188.7453 7937.9471,-3234.6069 7958.9702,-3275.244"/><polygon fill="none" stroke="#000" points="7949.746 -3280.266 7972.857 -3302.087 7968.398 -3270.617 7949.746 -3280.266"/></g><g id="edge54" class="edge"><title>32-&gt;35</title><path fill="none" stroke="#000" d="M7650.3286,-3147.5595C7566.2143,-3204.2703 7468.9512,-3269.8462 7396.8746,-3318.4411"/><polygon fill="none" stroke="#000" points="7390.535 -3310.051 7371.531 -3335.528 7402.275 -3327.464 7390.535 -3310.051"/></g><g id="edge57" class="edge"><title>33-&gt;29</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M7914.6764,-3477.5208C7886.1919,-3501.6889 7855.935,-3527.3607 7829.6947,-3549.6245"/><polygon fill="#000" stroke="#000" points="7827.408 -3546.975 7822.047 -3556.113 7831.937 -3552.313 7827.408 -3546.975"/></g><g id="node37" class="node"><title>34</title><polygon fill="#f2f2f2" stroke="#000" points="7887.094 -3514.3 7887.094 -3706.3 8149.271 -3706.3 8149.271 -3514.3 7887.094 -3514.3"/><text x="8018.182" y="-3689.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">&lt;&lt;Abstract&gt;&gt;</text><text x="8018.182" y="-3672.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="middle">Proxy</text><polyline fill="none" stroke="#000" points="7887.094 -3664.7 8149.271 -3664.7"/><polyline fill="none" stroke="#000" points="7887.094 -3639.9 8149.271 -3639.9"/><text x="7895.094" y="-3623.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Internal:</text><text x="7895.094" y="-3606.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;abstract&gt;&gt; _implementation(): address</text><text x="7895.094" y="-3589.7" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_delegate(implementation: address)</text><text x="7895.094" y="-3572.9" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_willFallback()</text><text x="7895.094" y="-3556.1" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">_fallback()</text><text x="7895.094" y="-3539.3" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">Public:</text><text x="7895.094" y="-3522.5" fill="#000" font-family="Times,serif" font-size="14" text-anchor="start">&lt;&lt;fallback&gt;&gt; ()</text></g><g id="edge56" class="edge"><title>33-&gt;34</title><path fill="none" stroke="#000" d="M8018.1824,-3477.5208C8018.1824,-3479.6798 8018.1824,-3481.8508 8018.1824,-3484.0303"/><polygon fill="none" stroke="#000" points="8007.682 -3484.078 8018.182 -3514.078 8028.682 -3484.078 8007.682 -3484.078"/></g><g id="edge58" class="edge"><title>36-&gt;33</title><path fill="none" stroke="#000" d="M8182.5624,-3071.9569C8156.3713,-3122.5838 8113.1234,-3206.1811 8077.5606,-3274.9231"/><polygon fill="none" stroke="#000" points="8068.072 -3270.412 8063.614 -3301.883 8086.724 -3280.062 8068.072 -3270.412"/></g><g id="edge59" class="edge"><title>37-&gt;35</title><path fill="none" stroke="#000" d="M1938.0773,-3072.1164C1946.8043,-3128.4309 1970.6986,-3221.8864 2035.1824,-3265.6 2145.245,-3340.2116 6412.0739,-3381.8349 7175.0344,-3388.6885"/><polygon fill="none" stroke="#000" points="7175.128 -3399.19 7205.221 -3388.958 7175.316 -3378.191 7175.128 -3399.19"/></g></g></svg>